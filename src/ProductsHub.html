<!DOCTYPE html style="height: 100%">

<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js"></script>

<script src="js/bootstrap.min.js"></script>
<script src="js/bootstrap-datepicker.min.js"></script>

<link href="css/bootstrap-datepicker.min.css" rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/jquery-ui.min.css"  rel="stylesheet">

<link href="css/products.css" rel="stylesheet">

<script src="js/lunr.min.js"></script>

<!-- for ie -->
<script src="https://www.promisejs.org/polyfills/promise-6.1.0.js"></script>

<head>
  <script src="libs/VSS.SDK.min.js"></script>
  <script>
    // Sets up the initial handshake with the host frame
    VSS.init({
      explicitNotifyLoaded: true,
      usePlatformScripts: true,
      applyTheme: true
    });
    VSS.require(["dist/src/productshub"]);
  </script>
</head>
<body style="height: 100%">
  <div class="container">
    <div class="row">
      <h3>NI Products</h3>
    </div>
    <br/>
    <h5><div id="error-text" style="color: red"></div></h5>
    <div id="main-container" hidden>
      <div class="actions-control toolbar" id="menubar" hidden></div>
      <br/>
      <div class="row">
        <div class="col col-lg-2">
          <h3>Products</h3>
        </div>
      </div> 
      <div class="row overflow-auto">
        <div class="col col-lg-12 overflow-auto" style="height: 75%" >
          <div id="productTree"></div>
        </div>
          <div class="col col-lg-4" hidden>
            <h2 id="info-product">Selected Product</h2>
            <h4 id="info-version">Version</h4>
            <div id="info-date-area" hidden="true">
              <h5>First Availability:</h5>
              <input type="text" id="info-date" class="form-control" value="1980-01-01" readonly="true"> </input>
            </div>
            <div id="info-imported"></div>
            <button type="button" id="info-external-update" onClick="updateFromPMDM()" hidden="true">Update from PMDM</button>
            <input id="info-node" hidden="true"></input>
            <div>Key:</div>
            <div id="info-key"></div>
          </div>
        </div>
      </div>
  </div>

  <!-- TODO: Generalize/Abstract the modals -->

  <!-- Modal -->
  <!-- New Manaul Product -->
  <div class="modal fade" id="manualModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="ui-widget">
                <label for="newManualProductName">Name:</label>
                <input id="newManualProductName">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal">Cancel</button>
          <button type="button" id="new-manual-product-ok" data-dismiss="modal" >Add Product</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- New Version -->
  <div class="modal fade" id="newProductVersionModal" tabindex="-1" role="dialog" aria-labelledby="newProductName" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title" id="newProductVersionName">New Product Version</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="col col-sm-4">
                <label for="newVersionName">Version Name:</label>
              </div>
              <div class="col col-sm-2"></div>
              <div class="col col-sm-4">
                First Available:
              </div>
            </div>
            <div class="row">
              <div class="col col-sm-4">
                <input id="newVersionName">
              </div>
              <div class="col col-sm-2"></div>
              <div class="col col-sm-4">
                <input type="text" id="new-version-date" class="form-control"></input>
              </div>
            </div>
            <input hidden="true" id="newVersionProduct"></input>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal">Cancel</button>
          <button type="button" data-dismiss="modal" id='new-version-dialog-ok' >Add Product</button>
          <br/>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- PMDM Software Import -->
  <div class="modal fade" id="pmdmModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Import from PMDM</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="pmdmAutoFill">
                  <div class="ui-widget">
                    <label for="tags">PMDM Products:</label>
                    <input id="tags"></input>
                  </div>
                    <input id="toAddPMDMid" hidden />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
              Start typing then select a product from the autocomplete.
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal">Cancel</button>
          <button type="button" id="pmdm-software-dialog-ok" data-dismiss="modal" >Add Product</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- PMDM Hardware Import -->
  <div class="modal fade" id="pmdmHardwareModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Import from PMDM</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="pmdmHardwareAutoFill">
                  <div class="ui-widget">
                    <label for="hardwareTags">PMDM Products:</label>
                    <input id="hardwareTags"></input>
                  </div>
                    <input id="toAddPMDMHardwareid" hidden />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
              Start typing then select a product from the autocomplete.
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal">Cancel</button>
          <button type="button" id="pmdm-hardware-dialog-ok" data-dismiss="modal" >Add Product</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- Date Picker -->
  <div class="modal fade" id="datePickerModal" tabindex="-1" role="dialog" aria-labelledby="newProductName" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title">Set Date</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="col col-sm-4">
                <h3 style="display:inline">Product:</h3><div id="datePickerProduct">My product</div>
                <h3 style="display:inline">Version:</h3><div id="datePickerVersion">1.0</div>
              </div>
              <div class="col col-sm-4">
                First Available: <br/>
                <input type="text" id="datePickerPicker" class="form-control"></input>
              </div>
            </div>
            <input hidden="true" id="datePickerGridKey"></input>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal">Cancel</button>
          <button type="button" data-dismiss="modal" id='datePickerCompletion' >Set Date</button>
          <br/>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- Update From PMDM -->
  <div class="modal fade" id="pmdmUpdateModal" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="newProductName" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title">Updating from PMDM</h5>
        </div>
        <div class="modal-body">
          Updating from PMDM.<br />
          <div id='pmdmUpdateStatus'></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <!-- Saving -->
  <div class="modal fade" id="savingModal" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="newProductName" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content ui-dialog" style="display: flex">
        <div class="modal-header">
          <h5 class="modal-title">Saving</h5>
        </div>
      </div>
    </div>
  </div>
Last Automated PMDM Update: <div id="pmdm-update-time"></div>
</body>
</html>